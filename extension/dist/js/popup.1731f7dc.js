(function(t){function e(e){for(var r,c,i=e[0],s=e[1],u=e[2],f=0,p=[];f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&p.push(o[c][0]),o[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);l&&l(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var s=n[i];0!==o[s]&&(r=!1)}r&&(a.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},o={popup:0},a=[];function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=s;a.push([1,"chunk-vendors"]),n()})({1:function(t,e,n){t.exports=n("812d")},"23d4":function(t,e,n){"use strict";n("99af"),n("4160"),n("a15b"),n("159b");var r=n("d4ec"),o=n("bee2"),a=n("53ca"),c=n.n(a),i=n("b21a"),s=n("fa7d"),u=function(){function t(){Object(r["a"])(this,t),this.scope=i["a"].scope,this.hosts=[]}return Object(o["a"])(t,[{key:"setProxy",value:function(t){t&&s["b"].isArray(t)&&(t.length<=0?this.clear():(this.chromeProxySet(this.createPacScript(t)),console.log(t),console.log(this.createPacScript(t))))}},{key:"getProxy",value:function(){return this.hosts}},{key:"createPacScript",value:function(t){var e=[];return t.forEach((function(t){var n=t.host,r=t.ip,o=/:\d+$/.test(r)?"":":80";e.push("\n        case '".concat(n,"':\n          proxyValue = 'PROXY ").concat(r).concat(o,"' \n          break\n      "))})),"\n      function FindProxyForURL(url, host) {\n        let proxyValue = 'DIRECT'\n        switch(host) {\n          ".concat(e.join(""),"\n        }\n        return proxyValue\n      }\n    ")}},{key:"chromeProxySet",value:function(t){c.a.proxy.settings.set({value:{mode:"pac_script",pacScript:{data:t}},scope:this.scope},(function(t){return t}))}},{key:"clear",value:function(){console.log("clearing chrome proxy"),c.a.proxy.settings.clear({scope:this.scope})}}]),t}();e["a"]=new u},3865:function(t,e,n){},"53ca":function(t,e){t.exports=chrome},"622c":function(t,e,n){"use strict";var r=n("3865"),o=n.n(r);o.a},"68fe":function(t,e,n){"use strict";n("d3b7");var r=n("d4ec"),o=n("bee2"),a=n("ade3"),c=n("53ca"),i=n.n(c),s=n("b21a"),u=s["a"].nameSpace,l=s["a"].defaultData,f=function(){function t(){Object(r["a"])(this,t),Object(a["a"])(this,"checkStorage",(function(){if(i.a&&i.a.storage)return!0;console.error("chrome.storage must be use in extension")})),this.nameSpace=u,this.defaultData=l}return Object(o["a"])(t,[{key:"initial",value:function(){return this.saveStorage(l)}},{key:"saveStorage",value:function(t){var e=this,n=JSON.stringify(t);return new Promise((function(t){e.checkStorage()&&i.a.storage.sync.set(Object(a["a"])({},u,n),(function(){t.apply(void 0,arguments)}))}))}},{key:"getStorage",value:function(){var t=this;return this._getStorage().then((function(e){return e||t.initial()})).catch((function(t){console.error(t)}))}},{key:"_getStorage",value:function(){var t=this;return new Promise((function(e,n){t.checkStorage()&&i.a.storage.sync.get(u,(function(t){var r=t[u]||null;try{e(JSON.parse(r))}catch(o){n(o)}}))}))}}]),t}();e["a"]=new f},"812d":function(t,e,n){"use strict";n.r(e);n("055b");var r=n("160c"),o=(n("06ea"),n("fe2b")),a=(n("805a"),n("0c63")),c=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"popup"}},[n("div",{staticClass:"header"},[t._v("Switch hosts")]),n("a-list",{staticClass:"list",attrs:{size:"small",bordered:"",dataSource:t.tabs},scopedSlots:t._u([{key:"renderItem",fn:function(e){return n("a-list-item",{staticClass:"list-item"},[n("a-switch",{attrs:{size:"small"},on:{change:function(n){return t.switchHost(e)}},model:{value:e.actived,callback:function(n){t.$set(e,"actived",n)},expression:"item.actived"}}),t._v(" "),n("span",{staticClass:"text text-ellipsis",attrs:{title:e}},[t._v(t._s(e.title))])],1)}}])}),n("a",{staticClass:"footer",attrs:{target:"_blank",href:t.settingUrl}},[n("a-icon",{attrs:{type:"setting"}}),t._v(" 设置 ")],1)],1)},s=[],u=(n("4de4"),n("4160"),n("159b"),n("53ca")),l=n.n(u),f=n("23d4"),p=n("68fe"),d={name:"Popup",data:function(){return{tabs:[]}},computed:{settingUrl:function(){return"chrome-extension://".concat(l.a.runtime.id,"/dist/options.html")}},mounted:function(){var t=this;p["a"].getStorage().then((function(e){console.log("get",e),t.tabs=e}))},methods:{switchHost:function(t){var e=t.id,n=t.actived,r=t.hosts;if(n)this.tabs.forEach((function(t){t.id!==e&&(t.actived=!1)})),f["a"].setProxy(r);else{var o=this.tabs.filter((function(t){return t.actived}));o.length<=0&&f["a"].clear()}p["a"].saveStorage(this.tabs)}}},h=d,b=(n("622c"),n("2877")),v=Object(b["a"])(h,i,s,!1,null,null,null),g=v.exports;n("bccf");c["a"].config.productionTip=!1,c["a"].use(a["a"]),c["a"].use(o["b"]),c["a"].use(r["a"]),new c["a"]({render:function(t){return t(g)}}).$mount("#app")},b21a:function(t,e,n){"use strict";e["a"]={nameSpace:"switch-hosts",scope:"regular",loggerMax:1e3,defaultData:[{id:"sd-key-default",title:"your name",content:"# switch hosts \n 127.0.0.1 localhost",actived:!1,hover:!1,titleEditing:!1,contentEditing:!1}]}},bccf:function(t,e,n){},fa7d:function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return h}));n("a4d3"),n("99af"),n("4de4"),n("4160"),n("a434"),n("0d03"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("ac1f"),n("25f0"),n("5319"),n("159b"),n("2909"),n("ade3");var r=function(t){var e=Object.prototype.toString.call(t);return e.replace(/\[object (.)(.+)\]/,(function(t,e,n){return"".concat(e.toLocaleLowerCase()).concat(n)}))},o=function(t){return"array"===r(t)},a=function(t){return"object"===r(t)},c=function(t){return"number"===r(t)},i=function(t){return"string"===r(t)},s=function(t){return"function"===r(t)},u=function(t){return"promise"===r(t)},l=function(t){return"blob"===r(t)},f=function(t){return"regexp"===r(t)},p={isArray:o,isNumber:c,isString:i,isRegexp:f,isObject:a,isFunction:s,isBlob:l,isPromise:u},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return setTimeout((function(){return t&&t.apply(void 0,r)}),e)}},h=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=d(t,n);if(s(t))return function(){clearTimeout(e),e=r.apply(void 0,arguments)}}}});
//# sourceMappingURL=popup.1731f7dc.js.map